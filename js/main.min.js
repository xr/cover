function random_color(){var t=function(){return Math.floor(256*Math.random())};return"rgba("+t()+","+t()+","+t()+", .1)"}function init(){for(var t=0;20>t;t++){var i=new generate_mol("nd");mols.push(i)}for(var t=0;2>t;t++){var i=new generate_mol("C8H10N4O2");mols.push(i);var i=new generate_mol("C6H6O");mols.push(i);var i=new generate_mol("C6H12O6");mols.push(i)}draw()}function draw(){ctx.clearRect(0,0,canvas.width,canvas.height),canvas.width=canvas.width;for(var t=0;t<mols.length;t++){var i=mols[t];i.r+=5,i.draw()}}function generate_mol(t){this.x=Math.random()*w,this.y=Math.random()*h,this.r=Math.random()*Math.PI,this.draw=function(){"C6H6O"==t?(ctx.save(),ctx.translate(this.x+20,this.y+80),ctx.rotate(this.r),ctx.translate(-this.x+20,-this.y-80),ctx.beginPath(),ctx.moveTo(this.x,this.y+5),ctx.lineTo(this.x,this.y+30),ctx.lineTo(this.x-26,this.y+45),ctx.lineTo(this.x-26,this.y+75),ctx.lineTo(this.x,this.y+90),ctx.lineTo(this.x+26,this.y+75),ctx.lineTo(this.x+26,this.y+45),ctx.lineTo(this.x,this.y+30),ctx.moveTo(this.x-20,this.y+47),ctx.lineTo(this.x-20,this.y+73),ctx.moveTo(this.x,this.y+83),ctx.lineTo(this.x+22,this.y+70),ctx.moveTo(this.x,this.y+36),ctx.lineTo(this.x+22,this.y+49),ctx.strokeStyle="rgba(189, 195, 199,.3)",ctx.lineWidth=3,ctx.stroke(),ctx.fillStyle="rgba(189, 195, 199,.3)",ctx.font="15px Arial",ctx.fillText("OH",this.x-5,this.y),ctx.closePath(),ctx.restore()):"C8H10N4O2"==t?(ctx.save(),ctx.translate(this.x+20,this.y+80),ctx.rotate(this.r),ctx.translate(-this.x+20,-this.y-80),ctx.beginPath(),ctx.moveTo(this.x,this.y+5),ctx.lineTo(this.x,this.y+22),ctx.moveTo(this.x-9,this.y+35),ctx.lineTo(this.x-26,this.y+45),ctx.lineTo(this.x-26,this.y+75),ctx.lineTo(this.x,this.y+90),ctx.lineTo(this.x+18,this.y+80),ctx.moveTo(this.x+26,this.y+68),ctx.lineTo(this.x+26,this.y+45),ctx.lineTo(this.x+9,this.y+35),ctx.moveTo(this.x-20,this.y+47),ctx.lineTo(this.x-20,this.y+73),ctx.moveTo(this.x+23,this.y+42),ctx.lineTo(this.x+36,this.y+32),ctx.moveTo(this.x+26,this.y+46),ctx.lineTo(this.x+39,this.y+36),ctx.moveTo(this.x+34,this.y+81),ctx.lineTo(this.x+48,this.y+90),ctx.moveTo(this.x-2,this.y+88),ctx.lineTo(this.x-2,this.y+110),ctx.moveTo(this.x+3,this.y+88),ctx.lineTo(this.x+3,this.y+110),ctx.moveTo(this.x-26,this.y+45),ctx.lineTo(this.x-46,this.y+38),ctx.moveTo(this.x-60,this.y+44),ctx.lineTo(this.x-74,this.y+58),ctx.lineTo(this.x-61,this.y+77),ctx.moveTo(this.x-58,this.y+49),ctx.lineTo(this.x-68,this.y+59),ctx.moveTo(this.x-46,this.y+82),ctx.lineTo(this.x-26,this.y+73),ctx.moveTo(this.x-60,this.y+86),ctx.lineTo(this.x-70,this.y+100),ctx.strokeStyle="rgba(189, 195, 199,.3)",ctx.lineWidth=3,ctx.stroke(),ctx.fillStyle="rgba(189, 195, 199,.3)",ctx.font="15px Arial",ctx.fillText("CH",this.x-5,this.y),ctx.fillText("3",this.x+18,this.y+6),ctx.fillText("N",this.x-5,this.y+37),ctx.fillText("O",this.x+38,this.y+35),ctx.fillText("N",this.x+21,this.y+81),ctx.fillText("CH",this.x+50,this.y+99),ctx.fillText("3",this.x+72,this.y+105),ctx.fillText("O",this.x-5,this.y+124),ctx.fillText("N",this.x-59,this.y+42),ctx.fillText("N",this.x-59,this.y+84),ctx.fillText("H  C",this.x-98,this.y+114),ctx.fillText("3",this.x-87,this.y+119),ctx.closePath(),ctx.restore()):"C6H12O6"==t?(ctx.save(),ctx.translate(this.x+20,this.y+80),ctx.rotate(this.r),ctx.translate(-this.x+20,-this.y-80),ctx.beginPath(),ctx.font="15px Arial",ctx.fillStyle="rgba(189, 195, 199,.3)",ctx.moveTo(this.x-9,this.y+35),ctx.lineTo(this.x-26,this.y+45),ctx.lineTo(this.x-26,this.y+75),ctx.lineTo(this.x,this.y+90),ctx.lineTo(this.x+26,this.y+75),ctx.lineTo(this.x+26,this.y+45),ctx.moveTo(this.x+26,this.y+45),ctx.lineTo(this.x+52,this.y+30),ctx.fillText("CH2OH",this.x+52,this.y+30),ctx.moveTo(this.x+26,this.y+45),ctx.lineTo(this.x+9,this.y+35),ctx.fillText("O",this.x-6,this.y+40),ctx.moveTo(this.x-26,this.y+45),ctx.lineTo(this.x-52,this.y+30),ctx.fillText("HO",this.x-80,this.y+35),ctx.moveTo(this.x-26,this.y+75),ctx.lineTo(this.x-52,this.y+90),ctx.fillText("HO",this.x-80,this.y+95),ctx.moveTo(this.x,this.y+90),ctx.lineTo(this.x,this.y+115),ctx.fillText("OH",this.x-5,this.y+130),ctx.moveTo(this.x+26,this.y+75),ctx.lineTo(this.x+52,this.y+95),ctx.fillText("OH",this.x+55,this.y+105),ctx.strokeStyle="rgba(189, 195, 199,.3);",ctx.lineWidth=3,ctx.stroke(),ctx.closePath(),ctx.restore()):"nd"==t&&(ctx.save(),ctx.beginPath(),ctx.moveTo(w,this.y),ctx.quadraticCurveTo(this.x,h,0,-30),ctx.lineWidth=1,ctx.strokeStyle=random_color(),ctx.stroke())}}var canvas=document.getElementsByTagName("canvas")[0],ctx=canvas.getContext("2d"),w=$(document).width(),h=$(document).height();canvas.width=w,canvas.height=h;var mols=[];init(),$(window).on("click",function(){w=$(document).width(),h=$(document).height(),canvas.width=w,canvas.height=h,draw()}),$(window).on("resize",function(){w=$(document).width(),h=$(document).height(),canvas.width=w,canvas.height=h,draw()});